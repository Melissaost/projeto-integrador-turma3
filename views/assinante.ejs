<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/stylesheets/estiloAssinante.css">
    <link rel="stylesheet" href="/stylesheets/estiloPlanos.css">
    <link rel="stylesheet" href="/stylesheets/estiloHeaderFooter.css">
    <title>Barba,Cabelo e Bigode</title>

    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
</head>
<body>

<%- include('./partials/header')%>
<main>
    <script>
        function alterar() {
    
            const special = document.querySelectorAll("input");
            special.forEach((userItem) => {
                userItem.disabled = false;
            });
            document.getElementById("alterar").style.display = 'none';
            
        }
    </script>
    </body>

        <h2 class="note ak-black">BEM-VINDO,<span class="light ak-black"> <%= userLogged.nome %> !</span></h2>
        <section id="dados">
                    <div class="imgU"><img src="<%= userLogged.img %>" id="imgUser"></div>
                    <form class=form1 id="form1" action="/assinante" method="POST">
                        <div class = "infos">
                            <label>Nome</label>
                            <input type="text" id="nome" name="nome" required
                            value="<%= userLogged.nome %>" disabled >
                        </div>
                        <div class = "infos">
                            <label>Email</label>
                            <input type="email" id="email" name="email" required
                            value="<%= userLogged.email %>" disabled >
                        </div>
                      <!--  <div class = "infos">
                            <label>Nome</label>
                            <input type="password" id="senha" name="senha" placeholder="Digite sua senha" required>
                        </div>-->
                        <div class = "infos">
                            <label>CPF</label>
                            <input type="number" id="cpf" name="cpf" required
                            value="<%= userLogged.cpf %>" disabled  >
                        </div>
                        <div class = "infos">
                            <label>Data de nascimento</label>
                            <input class=date type="date" id="nascimento" name="nascimento" required 
                            value="<%= userLogged.nascimento %>" disabled >
                        </div>
                        <div class = "infos">
                            <label>Telefone</label>
                            <input type="tel" id="telefone" name="telefone" 
                            value="<%= userLogged.telefone %>"disabled  >
                        </div>
                        <div class="infos">
                            <label for="genero">Gênero</label>
                            <div>
                                <input type="radio" name="genero" id="masculino" value="masculino" 
                                <% if (userLogged.genero === 'masculino') { %> checked <% } %> disabled  ><label form="masculino">Masculino</label>
                            </div>
                            <div>
                                <input type="radio" name="genero" id="feminino" value="feminino"
                                <% if (userLogged.genero === 'feminino') { %> checked <% } %> disabled ><label form="feminino">Feminino</label>
                            </div>
                            <div>
                                <input type="radio" name="genero" id="outros" value="outros"
                                <% if (userLogged.genero === 'outros') { %> checked <% } %> disabled  ><label form="outros">Outros</label>
                            </div>    
                            <div>    
                                <input type="radio" name="genero" id="nao informado" value="nao informado"
                                <% if (userLogged.genero === 'nao informado') { %> checked <% } %> disabled ><label form="nao informado">Prefiro não informar</label>
                            </div>    
                        </div>
                        <section class="butons">
                            <div id="alterar" onclick="alterar()">Alterar</div>
                            <button id="senha">Alterar Senha</button>
                            <button id="salvar">Salvar</button>    
                        </section>
                    </form>   

                        <% let planoFound = listaplanos.find( onePlano => onePlano.id === userLogged.id_plano)%> 
                        <% console.log(planoFound)%>
                    <section class="planosIndex">
                        <section class="cardsPlanos">
                                <article class="card">
                                    <div class="imgPlano"><img src= "<%= planoFound.img %>" class="imgCard"></div>
                                    <div class="conteudoCard">
                                    <div class="categoria"><%=planoFound.nome%></div>
                                    <h2 class="preco">R$<%=planoFound.preco%>,00</h2>
                                    <p class="descPlanos"><%=planoFound.barbas %> barba<% if (planoFound.barbas > 1) {%>s<%}%></p>
                                    <p>por mês</p>
                                    <p class="descPlanos"><%=planoFound.cabelo %> corte<% if (planoFound.cabelo > 1) {%>s<%}%> de cabelo</p>
                                    <p>por mês</p>
                                    </div>
                                <div class="seuplano">SUA ASSINATURA</div>
                                </article>
                        </section>
                    </section>
           
        </section>
        <nav class="historico">
            <h2 class="ak-black">SEU HISTÓRICO </h2>
            <section class="dados">
                <% for (let data in usuario[0].total) { %> 
                <article class="info">
                    <h2 class="white ak-black"><%=usuario[0].total[data] %> VEZ<% if(usuario[0].total[data]>1){%>ES<%}%></h2>
                    <p>É o número total de cortes de <%=data%>  desde a compra do plano</p>
                </article>
                <% } %> 
                <!-- <article class="info">
                    <h2 class="white ak-black">X VEZES</h2>
                    <p>É o número total de cortes de cabelo desde a compra do plano</p>
                </article> -->
                 <article class="info">
                    <h2 class="white ak-black"><%= usuario[0].barbearia %></h2>
                    <p>É a barbearia de sua preferência</p>
                </article>
            </section>
        </nav>
        <nav class="secaoPlanos">
            <div class="frases">
                <h2 class="dark ak-black">QUER DAR UM UPGRADE NO SEU PLANO?</h2>
                <p>Aproveite e dê um upgrade no seu plano e tenha mais ofertas dos nossos serviços. Ao escolher um novo plano você poderá utilizá-lo em até 24 horas. Não perca tempo e vamos fazer mais esse trato. Nós, No Fio do Bigode aguardamos você!!
                </p>
            </div>
            <section class="cardsPlanos">
                <% const index = listaplanos.findIndex(object=>object.nome===usuario[0].plano) %> 
                <% for (let i = index+1; i< listaplanos.length; i++) { %> 
                    <article class="cardP">
                        <div class="categoriaPlano"><p><%= listaplanos[i].nome %> </p></div>
                        <% if (listaplanos[i].nome == 'BASIC') {%> <div class="categoriaEcon">POPULAR</div> <% } %> 
                        <ul>
                            <li class="descPlanos"><%= listaplanos[i].cabelos%> corte<% if (listaplanos[i].cabelos > 1) {%>s<%}%> de cabelo<span class="descTempo"> no mês</span></li>
                            <li class="descPlanos"><%= listaplanos[i].barbas%> barba<% if (listaplanos[i].cabelos > 1) {%>s<%}%><span class="descTempo"> no mês</span></li>
                            <% for( let vantagem of listaplanos[i].vantagens) { %>
                                <li class="descPlanos"><%= vantagem %> </li>
                            <% } %>
                        </ul>
                        <div class="precoButon">
                            <h2 class="preco">R$<%= listaplanos[i].preco %>,00 </h2>
        
                            <button class="btnComecar"><p>COMPRAR</p><p>ESTE PLANO</p></button>
                            <div class="economia"><p>ADQUIRA ESTE PLANO E</p> <p>ECONOMIZE ATÉ R$<%=listaplanos[i].economia %> POR</p> <p>CORTE E BARBA</p></div>
                        </div>
                    </article>
                    <% } %> 
                <!-- <article class="cardP">
                    <div class="categoriaPlano">
                        <p>STANDARD</p>
                    </div>
                    <ul>
                        <li class="descPlanos">2 barbas</li>
                        <p class="descTempo">por mês</p>
                        <li class="descPlanos">2 cortes de cabelo</li>
                        <p class="descTempo">por mês</p>
                    </ul>
                    <h2 class="preco">R$65,00</h2>
                    <button class="btnComecar">
                        <p>COMPRAR</p>
                        <p>ESTE PLANO</p>
                    </button>
                    <div class="economia">
                        <p>ADIQUIRA ESTE PLANO E</p>
                        <p>ECONOMIZE ATÉ R$25 POR</p>
                        <p>CORTE E BARBA</p>
                    </div>
                </article> -->

                <!-- <article class="cardP">
                    <div class="categoriaPlano">
                        <p>PREMIUM</p>
                    </div>
                    <ul>
                        <li class="descPlanos">2 barbas</li>
                        <p class="descTempo">por mês</p>
                        <li class="descPlanos">3 cortes de cabelo</li>
                        <p class="descTempo">por mês</p>

                    </ul>
                    <h2 class="preco">R$80,00</h2>
                    <button class="btnComecar">
                        <p>COMPRAR</p>
                        <p>ESTE PLANO</p>
                    </button>
                    <div class="economia">
                        <p>ADIQUIRA ESTE PLANO E</p>
                        <p>ECONOMIZE ATÉ R$30 POR</p>
                        <p>CORTE E BARBA</p>
                    </div>
                </article> -->
            </section>
        </nav>
</main>
<%- include('./partials/footer')%>




</html>